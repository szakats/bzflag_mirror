# Test file for the parser. Will be changed to something more working later.

building
-> 0.2 : skyscraper
-> 0.6 : building1
-> 0.2 : building2
;

building1 
-> 0.3 : mat_glass extrude(4.0) [ entry * entry * ] b1floors
-> 0.3 : mat_glass extrude(4.0) [ * entry * entry ] b1floors
-> 0.2 : mat_wall2 extrude(3.7) [ * entry * entry ] extrude(0) expand(1.0) b1floors
-> 0.1 : mat_wall2 extrude(random(12.0,40.0,4.0)) [ * bspecialwall * bspecialwall ] top
-> 0.1 : mat_wall2 extrude(random(12.0,40.0,4.0)) [ bspecialwall * bspecialwall * ] top
;

building2
-> 0.3 : mat_wall extrude(4.0) [ entry * entry * ] b2floors
-> 0.3 : mat_wall extrude(4.0) [ * entry * entry ] b2floors
-> 0.2 : mat_wall extrude(random(12.0,40.0,4.0)) [ * bspecialwall * bspecialwall ] top
-> 0.2 : mat_wall extrude(random(12.0,40.0,4.0)) [ bspecialwall * bspecialwall * ] top
;

entry 
-> partitionh(face(h)/2 - 2.0) partitionh(4.0) [ entryext ]
;

entryext
-> extrude(-2.0) mat_roof
; 

b2floors
-> 0.5 : common_ledge mat_wall2 extrude(3.7) b2floors
-> 0.2 : common_ledge mat_wall2 extrude(3.7) [ @bspecialwall ] b2floors
-> 0.3 : top
;

b1floors
-> 0.6 : common_ledge mat_wall2 extrude(3.7) b1floors
-> 0.2 : common_ledge mat_wall2 extrude(3.7) [ @bspecialwall ] b1floors
-> 0.2 : top
;

bspecialwall
-> 0.8 : subdivideh(3) [ * binsetwall * ] 
-> 0.2 : subdivideh(3) [ * insetwall * ] 
;

binsetwall -> extrude(-3.0) mat_glass;


skyscraper
-> 0.2 : mat_glass chamfer(3.0) extrude(random(16.0,80.0,8.0)) top 
-> 0.2 : mat_glass extrude(random(16.0,80.0,8.0)) [ @specialwall ] top 
-> 0.3 : mat_glass extrude(16.0) skycont 
-> 0.3 : mat_glass extrude(random(24.0,64.0,8.0)) taper(0.6) top
;

specialwall -> mat_glass subdivideh(3) [ * insetwall * ] ;

insetwall -> extrude(-5.0) ;

top -> mat_mesh extrude(0.0) expand(0.3) extrude(0.5) mat_roof topdingbat;

topdingbat 
-> 0.2  : assert(face(h) > 15.0) assert(face(v) > 15.0) spawn(toptop) 
-> 0.2  : mat_mesh
-> 0.02 : extrude(0.0) expand(-2.0) extrude(-0.3) mat_grass
-> 0.58 : 
;

toptop 
-> 0.6 : expand(-5.0) mat_mesh extrude(2.0) top
-> 0.4 : expand(-5.0) mat_mesh chamfer(1.0) extrude(2.0)
;

skycont
-> 0.4 : common_ledge mat_glass extrude(16.0) skycont
-> 0.1 : common_ledge assert(face(h) > 6.0) partitionh(face(h)/3) mat_glass extrude(16.0) skycont
-> 0.1 : common_ledge assert(face(v) > 6.0) partitionv(face(v)/3) mat_glass extrude(16.0) skycont
-> 0.4 : top
;

